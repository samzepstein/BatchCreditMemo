public class InvocableBatchCreditMemo {
    
    public class CreditMemoRequest{
        @InvocableVariable(label='Credit Memo Reason')
        public String cmReason;
        
        @InvocableVariable(label='Revised Opportunity?')
        public Boolean needsRev;
        
        @InvocableVariable(label='Internal Fix?')
        public Boolean isInternal;
        
        @InvocableVariable(label='Opportunity Id')
        public ID oppId;
    }
    
    @InvocableMethod(label='Invoke Batch Credit Memo' description='Creates a credit memo opportunity with quote and quote lines')
    public static void createCreditMemo(List<CreditMemoRequest> cmRequests){
        for(CreditMemoRequest cmRequest : cmRequests){
            Database.executeBatch(new BatchCreditMemoOpportunity(cmRequest.cmReason, cmRequest.needsRev, cmRequest.isInternal, cmRequest.oppId));
        }
    }
}
